<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€¥æ•‘æŒ‡æŒ¥å®˜ - åº”æ€¥æ•‘æ´æ¨¡æ‹ŸåŸ¹è®­å¹³å°</title>
    <style>
        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* å¯¼èˆªæ æ ·å¼ */
        .navbar {
            background-color: #2E86AB;
            padding: 0.8rem 1rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        .logo-icon {
            width: 36px;
            height: 36px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2E86AB;
            font-weight: bold;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        .nav-menu a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 0.8rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .nav-menu a:hover,
        .nav-menu a.active {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .auth-buttons {
            display: flex;
            gap: 0.8rem;
        }
        
        .btn-login,
        .btn-register {
            padding: 0.5rem 1.2rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-login {
            background-color: white;
            color: #2E86AB;
        }
        
        .btn-register {
            background-color: #4CAF50;
            color: white;
        }
        
        .btn-login:hover {
            background-color: #f0f0f0;
        }
        
        .btn-register:hover {
            background-color: #45a049;
        }
        
        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            margin-top: 70px;
            padding: 2rem 1rem;
            flex: 1;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* é¦–é¡µæ ·å¼ */
        .hero-section {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .main-title {
            font-size: 2.2rem;
            color: #2E86AB;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 2.5rem;
        }
        
        .scene-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .scene-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .scene-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .scene-image {
            width: 100%;
            height: 160px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 4rem;
        }
        
        .scene-video {
            width: 100%;
            margin-bottom: 1rem;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .scene-video video {
            border-radius: 8px;
            transition: transform 0.3s ease;
        }
        
        .scene-video video:hover {
            transform: scale(1.02);
        }
        
        .scene-card h3 {
            color: #2E86AB;
            margin-bottom: 0.5rem;
        }
        
        .scene-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        
        .tag {
            background-color: #e3f2fd;
            color: #1976d2;
            padding: 0.2rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
        }
        
        .scene-desc {
            color: #666;
            font-size: 0.9rem;
        }
        
        .stats-section {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        .stat-card {
            background: white;
            padding: 1.2rem 1.8rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
            min-width: 220px;
        }
        
        .stat-icon {
            font-size: 2rem;
        }
        
        .stat-number {
            font-size: 1.8rem;
            color: #2E86AB;
            margin-bottom: 0.2rem;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
        
        /* é¡µè„šæ ·å¼ */
        .footer {
            background-color: #333;
            color: white;
            padding: 1.5rem 0;
            margin-top: 2rem;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .footer-left,
        .footer-center,
        .footer-right {
            flex: 1;
            min-width: 300px;
        }
        
        .tip-scroll {
            overflow: hidden;
            height: 24px;
            position: relative;
        }
        
        .tip-text {
            position: absolute;
            width: 100%;
            animation: scrollTips 15s infinite;
            opacity: 0;
        }
        
        /* å¼¹çª—æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 2rem;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            position: relative;
        }
        
        .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .modal-content h2 {
            margin-bottom: 1.5rem;
            color: #2E86AB;
            text-align: center;
        }
        
        .modal-content form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .modal-content input {
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .btn-submit {
            background-color: #2E86AB;
            color: white;
            padding: 0.8rem;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn-submit:hover {
            background-color: #267194;
        }
        
        /* æ¨¡æ‹Ÿé¡µé¢æ ·å¼ */
        .simulation-container {
            display: none;
            margin-top: 70px;
            padding: 1rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .status-bar {
            background-color: #2E86AB;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .steps-progress {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .step {
            padding: 0.5rem 1rem;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }
        
        .step.active {
            background-color: #ff4757;
            font-weight: bold;
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(255, 71, 87, 0.4);
        }
        
        /* æ­¥éª¤å®ŒæˆåŠ¨ç”» */
        @keyframes stepComplete {
            0% { background-color: #ff4757; }
            100% { background-color: #4CAF50; }
        }
        
        .step.completed {
            animation: stepComplete 0.5s ease forwards;
        }
        
        .timer {
            font-size: 1.1rem;
            font-weight: bold;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
        }
        
        .simulation-main {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .scene-area {
            flex: 3;
            min-width: 300px;
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            min-height: 400px;
        }
        
        .info-panel {
            flex: 2;
            min-width: 300px;
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .instructions {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #2E86AB;
        }
        
        .instructions h3 {
            color: #2E86AB;
            margin-bottom: 0.5rem;
        }
        
        .instructions ol {
            padding-left: 1.2rem;
        }
        
        .instructions li {
            margin-bottom: 0.3rem;
        }
        
        /* å¯äº¤äº’å…ƒç´  */
        .interactive-element {
            position: absolute;
            padding: 0.8rem 1.2rem;
            background-color: #2E86AB;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            user-select: none;
        }
        
        .interactive-element:hover {
            transform: scale(1.05);
            background-color: #267194;
        }
        
        .interactive-element.hazard {
            background-color: #ff4757;
        }
        
        .interactive-element.hazard:hover {
            background-color: #e84151;
        }
        
        .interactive-element.patient {
            background-color: #4CAF50;
        }
        
        .interactive-element.patient:hover {
            background-color: #45a049;
        }
        
        .interactive-element.aed {
            background-color: #ff9f43;
        }
        
        .interactive-element.aed:hover {
            background-color: #ff8c2b;
        }
        
        /* CPRç›‘æµ‹åŒºåŸŸ */
        .monitor-area {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border: 2px solid #ddd;
        }
        
        .monitor-area h3 {
            color: #2E86AB;
            margin-bottom: 0.8rem;
            text-align: center;
        }
        
        .compression-meter {
            margin: 1rem 0;
        }
        
        .meter-scale {
            height: 30px;
            background: linear-gradient(to right, #ff4757 0%, #ff4757 50%, #2E86AB 50%, #2E86AB 62.5%, #ff4757 62.5%, #ff4757 100%);
            border-radius: 15px;
            position: relative;
            margin-bottom: 0.5rem;
        }
        
        .meter-indicator {
            position: absolute;
            height: 40px;
            width: 4px;
            background-color: #333;
            top: -5px;
            transition: left 0.3s;
        }
        
        .depth-value {
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: #2E86AB;
            margin-top: 0.5rem;
        }
        
        .frequency-display {
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: #2E86AB;
            margin-top: 1rem;
        }
        
        .rating-area {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border: 2px solid #ddd;
        }
        
        .score-display {
            font-size: 2rem;
            font-weight: bold;
            color: #2E86AB;
            text-align: center;
            margin: 0.5rem 0;
            transition: all 0.3s ease;
        }
        
        /* è¯„åˆ†å˜åŒ–åŠ¨ç”» */
        .score-increase {
            animation: scorePulse 0.5s ease;
            color: #4CAF50;
            transform: scale(1.2);
        }
        
        .score-decrease {
            animation: scorePulse 0.5s ease;
            color: #ff4757;
            transform: scale(1.2);
        }
        
        @keyframes scorePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .deduction-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .deduction-list li {
            padding: 0.3rem 0;
            border-bottom: 1px dashed #ddd;
            color: #666;
        }
        
        /* æ“ä½œæŒ‰é’® */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .action-btn {
            padding: 0.8rem 1.5rem;
            background-color: #2E86AB;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            flex: 1;
        }
        
        .action-btn:hover {
            background-color: #267194;
        }
        
        .action-btn.secondary {
            background-color: #6c757d;
        }
        
        .action-btn.secondary:hover {
            background-color: #5a6268;
        }

        /* é€šçŸ¥æ ·å¼ */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 1rem 1.5rem;
            color: white;
            border-radius: 5px;
            z-index: 1002;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: fadeInOut 3s forwards;
        }
        
        .notification.success {
            background-color: #4CAF50;
        }
        
        .notification.error {
            background-color: #ff4757;
        }
        
        .notification.info {
            background-color: #2E86AB;
        }
        
        /* åŠ¨ç”» */
        @keyframes scrollTips {
            0%, 20% {
                opacity: 1;
                transform: translateY(0);
            }
            25%, 95% {
                opacity: 0;
                transform: translateY(-100%);
            }
            100% {
                opacity: 0;
                transform: translateY(-100%);
            }
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(-20px); }
            10% { opacity: 1; transform: translateY(0); }
            90% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        @keyframes flash {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
        
        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-5px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(5px);
            }
        }
        
        /* CPRæŒ‰å‹åé¦ˆåŠ¨ç”» */
        @keyframes compression {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); background-color: #45a049; }
            100% { transform: scale(1); }
        }
        
        .compression-animation {
            animation: compression 0.3s ease;
        }
        
        /* æŒ‰å‹æ·±åº¦æŒ‡ç¤ºå™¨æ³¢åŠ¨åŠ¨ç”» */
        @keyframes indicatorPulse {
            0% { height: 40px; }
            50% { height: 50px; }
            100% { height: 40px; }
        }
        
        .indicator-pulse {
            animation: indicatorPulse 0.3s ease;
        }
        
        /* åœºæ™¯å…ƒç´ å‡ºåœºåŠ¨ç”» */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.5s ease forwards;
        }
        
        /* ä¸ºä¸åŒå…ƒç´ è®¾ç½®å»¶è¿Ÿ */
        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        
        /* åŠ¨ç”»ç±» */
        .pulse-animation {
            animation: pulse 1s infinite;
        }
        
        .flash-animation {
            animation: flash 1s infinite;
        }
        
        .shake-animation {
            animation: shake 0.5s;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }
            
            .hero-section {
                padding: 1rem;
            }
            
            .main-title {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .simulation-main {
                flex-direction: column;
            }
            
            .footer-container {
                flex-direction: column;
                text-align: center;
            }
            
            .footer-left,
            .footer-center,
            .footer-right {
                min-width: 100%;
            }
        }
        
        /* é¡µé¢åˆ‡æ¢ */
        .page {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        
        .page.active {
            display: block;
            opacity: 1;
        }
        
        /* éšè—æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { width: 0; height: 0; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: transparent; }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">æ•‘</div>
                <span class="logo-text">æ€¥æ•‘æŒ‡æŒ¥å®˜</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#" class="nav-link active" data-page="home">é¦–é¡µ</a></li>
                <li><a href="#" class="nav-link" data-page="simulation">æ€¥æ•‘æ¨¡æ‹Ÿ</a></li>
                <li><a href="#" class="nav-link" data-page="knowledge">çŸ¥è¯†åº“</a></li>
                <li><a href="#" class="nav-link" data-page="profile">ä¸ªäººä¸­å¿ƒ</a></li>
            </ul>
            <div class="auth-buttons">
                <button class="btn-login" id="loginBtn">ç™»å½•</button>
                <button class="btn-register" id="registerBtn">æ³¨å†Œ</button>
            </div>
        </div>
    </nav>

    <!-- é¦–é¡µ -->
    <div class="main-content">
        <div class="container">
            <div id="home-page" class="page active">
                <div class="hero-section">
                    <h1 class="main-title">åº”æ€¥æ•‘æ´æ¨¡æ‹ŸåŸ¹è®­å¹³å°</h1>
                    <p class="subtitle">æŒæ¡æ€¥æ•‘æŠ€èƒ½ï¼Œå®ˆæŠ¤ç”Ÿå‘½å®‰å…¨</p>
                    
                    <!-- åœºæ™¯å¿«é€Ÿå…¥å£ -->
                    <div class="scene-cards">
                        <div class="scene-card" data-scene="home">
                            <div class="scene-video">
                                <video controls width="100%" height="200px" poster="https://neeko-copilot.bytedance.net/api/text2image?prompt=first%20aid%20training%20video%20thumbnail%20for%20home%20scene&image_size=square">
                                    <source src="videos/2.mp4" type="video/mp4">
                                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
                                </video>
                            </div>
                            <h3>å®¶åº­åœºæ™¯æ€¥æ•‘</h3>
                            <div class="scene-tags">
                                <span class="tag">å®¶åº­</span>
                                <span class="tag">åŸºç¡€</span>
                                <span class="tag">CPR</span>
                            </div>
                            <p class="scene-desc">æ¨¡æ‹Ÿå®¶åº­ç¯å¢ƒä¸‹çš„æ€¥æ•‘åœºæ™¯ï¼ŒåŒ…æ‹¬è€äººçªå‘å¿ƒè„ç—…ã€å„¿ç«¥å¼‚ç‰©å¡å–‰ç­‰å¸¸è§æ€¥æ•‘æƒ…å†µã€‚</p>
                        </div>
                        
                        <div class="scene-card" data-scene="outdoor">
                            <div class="scene-video">
                                <video controls width="100%" height="200px" poster="https://neeko-copilot.bytedance.net/api/text2image?prompt=first%20aid%20training%20video%20thumbnail%20for%20outdoor%20scene&image_size=square">
                                    <source src="videos/1.mp4" type="video/mp4">
                                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
                                </video>
                            </div>
                            <h3>æˆ·å¤–åœºæ™¯æ€¥æ•‘</h3>
                            <div class="scene-tags">
                                <span class="tag">æˆ·å¤–</span>
                                <span class="tag">è¿›é˜¶</span>
                                <span class="tag">AED</span>
                            </div>
                            <p class="scene-desc">æ¨¡æ‹Ÿæˆ·å¤–è¿åŠ¨ã€æ—…æ¸¸ç­‰åœºæ™¯ä¸‹çš„æ€¥æ•‘ï¼ŒåŒ…æ‹¬æººæ°´ã€ä¸­æš‘ã€å¤–ä¼¤å‡ºè¡€ç­‰ç´§æ€¥æƒ…å†µå¤„ç†ã€‚</p>
                        </div>
                        
                        <div class="scene-card" data-scene="office">
                            <div class="scene-video">
                                <video controls width="100%" height="200px" poster="https://neeko-copilot.bytedance.net/api/text2image?prompt=first%20aid%20training%20video%20thumbnail%20for%20office%20scene&image_size=square">
                                    <source src="videos/3.mp4" type="video/mp4">
                                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
                                </video>
                            </div>
                            <h3>åŠå…¬å®¤åœºæ™¯æ€¥æ•‘</h3>
                            <div class="scene-tags">
                                <span class="tag">èŒåœº</span>
                                <span class="tag">å›¢é˜Ÿ</span>
                                <span class="tag">åº”æ€¥</span>
                            </div>
                            <p class="scene-desc">æ¨¡æ‹ŸåŠå…¬ç¯å¢ƒä¸‹çš„çªå‘çŠ¶å†µï¼ŒåŒ…æ‹¬å¿ƒè„éª¤åœã€è§¦ç”µã€ç”µæ¢¯å›°äººç­‰èŒåœºæ€¥æ•‘åœºæ™¯ã€‚</p>
                        </div>
                    </div>
                    
                    <!-- ç»Ÿè®¡æ•°æ® -->
                    <div class="stats-section">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ‘¥</div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="trained-count">1287</h3>
                                <p class="stat-label">å·²åŸ¹è®­äººæ•°</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ”„</div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="simulation-count">5423</h3>
                                <p class="stat-label">ç´¯è®¡æ¨¡æ‹Ÿæ¬¡æ•°</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ€¥æ•‘æ¨¡æ‹Ÿé¡µé¢ -->
            <div id="simulation-page" class="page">
                <div class="status-bar">
                    <div>
                        <span id="scene-name">æˆ·å¤–åœºæ™¯ - å¿ƒè„éª¤åœæ€¥æ•‘</span>
                    </div>
                    <div class="steps-progress">
                        <span class="step active" id="step-1">ç¯å¢ƒè¯„ä¼°</span>
                        <span class="step" id="step-2">ç—…æƒ…åˆ¤æ–­</span>
                        <span class="step" id="step-3">æ€¥æ•‘æ“ä½œ</span>
                    </div>
                    <div class="timer">
                        æ—¶é—´: <span id="timer-display">00:00</span>
                    </div>
                </div>
                
                <div class="simulation-main">
                    <!-- åœºæ™¯åŒºåŸŸ -->
                    <div class="scene-area" id="scene-area">
                        <!-- äº¤äº’å…ƒç´ å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                    </div>
                    
                    <!-- ä¿¡æ¯é¢æ¿ -->
                    <div class="info-panel">
                        <div class="instructions">
                            <h3>æ“ä½œæŒ‡å¼•</h3>
                            <ol id="instruction-list">
                                <li>ç‚¹å‡»"å¼€å§‹ç¯å¢ƒè¯„ä¼°"æŒ‰é’®</li>
                                <li>æ£€æŸ¥åœºæ™¯ä¸­çš„å±é™©å› ç´ </li>
                                <li>ä½¿ç”¨ç»ç¼˜æ£’ç§»é™¤å±é™©</li>
                            </ol>
                        </div>
                        
                        <div class="monitor-area">
                            <h3>CPRç›‘æµ‹</h3>
                            <div class="compression-meter">
                                <div class="meter-scale">
                                    <div class="meter-indicator" id="depth-indicator" style="left: 30%;"></div>
                                </div>
                                <div class="depth-value">æŒ‰å‹æ·±åº¦: <span id="depth-value">3.2</span> cm</div>
                            </div>
                            <div class="frequency-display">
                                æŒ‰å‹é¢‘ç‡: <span id="frequency-value">0</span> æ¬¡/åˆ†é’Ÿ
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn" id="start-cpr-btn">å¼€å§‹CPR</button>
                                <button class="action-btn secondary" id="stop-cpr-btn">åœæ­¢CPR</button>
                            </div>
                        </div>
                        
                        <div class="rating-area">
                            <h3>è¯„åˆ†</h3>
                            <div class="score-display" id="score-display">0</div>
                            <ul class="deduction-list" id="deduction-list">
                                <li>æš‚æ— æ‰£åˆ†é¡¹</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn" id="start-assessment-btn">å¼€å§‹ç¯å¢ƒè¯„ä¼°</button>
                    <button class="action-btn secondary" id="reset-btn">é‡ç½®åœºæ™¯</button>
                    <button class="action-btn secondary" id="help-btn">å¸®åŠ©</button>
                </div>
            </div>
            
            <!-- çŸ¥è¯†åº“é¡µé¢ -->
            <div id="knowledge-page" class="page">
                <div class="hero-section">
                    <h1 class="main-title">æ€¥æ•‘çŸ¥è¯†åº“</h1>
                    <p class="subtitle">å­¦ä¹ ä¸“ä¸šæ€¥æ•‘çŸ¥è¯†ï¼Œæå‡æ•‘æ´èƒ½åŠ›</p>
                    
                    <div class="scene-cards">
                        <div class="scene-card">
                            <div class="scene-image" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                â¤ï¸
                            </div>
                            <h3>å¿ƒè‚ºå¤è‹ (CPR)</h3>
                            <div class="scene-tags">
                                <span class="tag">åŸºç¡€</span>
                                <span class="tag">å¿…å¤‡</span>
                                <span class="tag">CPR</span>
                            </div>
                            <p class="scene-desc">å­¦ä¹ æ ‡å‡†çš„å¿ƒè‚ºå¤è‹æ“ä½œæµç¨‹ï¼ŒåŒ…æ‹¬æŒ‰å‹æ·±åº¦ã€é¢‘ç‡å’Œäººå·¥å‘¼å¸æŠ€å·§ã€‚</p>
                            <div class="action-buttons">
                                <button class="action-btn" onclick="showKnowledge('cpr')">å­¦ä¹ </button>
                            </div>
                        </div>
                        
                        <div class="scene-card">
                            <div class="scene-image" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                âš¡
                            </div>
                            <h3>AEDä½¿ç”¨</h3>
                            <div class="scene-tags">
                                <span class="tag">è¿›é˜¶</span>
                                <span class="tag">è®¾å¤‡</span>
                                <span class="tag">é™¤é¢¤</span>
                            </div>
                            <p class="scene-desc">æŒæ¡è‡ªåŠ¨ä½“å¤–é™¤é¢¤å™¨çš„æ­£ç¡®ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬ç”µæç‰‡ç²˜è´´ä½ç½®å’Œæ“ä½œæ­¥éª¤ã€‚</p>
                            <div class="action-buttons">
                                <button class="action-btn" onclick="showKnowledge('aed')">å­¦ä¹ </button>
                            </div>
                        </div>
                        
                        <div class="scene-card">
                            <div class="scene-image" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                ğŸŠ
                            </div>
                            <h3>æººæ°´æ€¥æ•‘</h3>
                            <div class="scene-tags">
                                <span class="tag">æˆ·å¤–</span>
                                <span class="tag">ç´§æ€¥</span>
                                <span class="tag">æ•‘æ´</span>
                            </div>
                            <p class="scene-desc">å­¦ä¹ æººæ°´è€…çš„æ•‘æ´æ–¹æ³•å’Œæ€¥æ•‘æªæ–½ï¼Œç¡®ä¿å®‰å…¨æœ‰æ•ˆçš„æ•‘æ´ã€‚</p>
                            <div class="action-buttons">
                                <button class="action-btn" onclick="showKnowledge('drowning')">å­¦ä¹ </button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="knowledge-detail" style="display:none; margin-top: 2rem; background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                        <h2 id="knowledge-title"></h2>
                        <div id="knowledge-content"></div>
                        <div class="action-buttons" style="margin-top: 1.5rem;">
                            <button class="action-btn secondary" onclick="hideKnowledge()">è¿”å›çŸ¥è¯†åº“</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ä¸ªäººä¸­å¿ƒé¡µé¢ -->
            <div id="profile-page" class="page">
                <div class="hero-section">
                    <h1 class="main-title">ä¸ªäººä¸­å¿ƒ</h1>
                    
                    <div class="stats-section" style="justify-content: flex-start; gap: 1.5rem;">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“Š</div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="user-score">0</h3>
                                <p class="stat-label">ç´¯è®¡å¾—åˆ†</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">âœ…</div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="completed-simulations">0</h3>
                                <p class="stat-label">å®Œæˆæ¨¡æ‹Ÿ</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">â±ï¸</div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="total-time">0</h3>
                                <p class="stat-label">æ€»è®­ç»ƒæ—¶é—´(åˆ†é’Ÿ)</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-top: 2rem;">
                        <h2 style="color: #2E86AB; margin-bottom: 1rem;">è®­ç»ƒè®°å½•</h2>
                        <div id="training-records" style="min-height: 200px; display: flex; align-items: center; justify-content: center; color: #666;">
                            æš‚æ— è®­ç»ƒè®°å½•
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç™»å½•å¼¹çª— -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeLogin">&times;</span>
            <h2>ç”¨æˆ·ç™»å½•</h2>
            <form id="loginForm">
                <input type="text" id="loginUsername" placeholder="ç”¨æˆ·å" required>
                <input type="password" id="loginPassword" placeholder="å¯†ç " required>
                <button type="submit" class="btn-submit">ç™»å½•</button>
            </form>
        </div>
    </div>

    <!-- æ³¨å†Œå¼¹çª— -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeRegister">&times;</span>
            <h2>ç”¨æˆ·æ³¨å†Œ</h2>
            <form id="registerForm">
                <input type="text" id="registerUsername" placeholder="ç”¨æˆ·å" required>
                <input type="email" id="registerEmail" placeholder="é‚®ç®±" required>
                <input type="password" id="registerPassword" placeholder="å¯†ç " required>
                <input type="password" id="registerConfirmPassword" placeholder="ç¡®è®¤å¯†ç " required>
                <button type="submit" class="btn-submit">æ³¨å†Œ</button>
            </form>
        </div>
    </div>

    <!-- å¸®åŠ©å¼¹çª— -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeHelp">&times;</span>
            <h2>æ€¥æ•‘æ¨¡æ‹Ÿå¸®åŠ©</h2>
            <div style="margin-top: 1rem;">
                <h3>æ“ä½œæŒ‡å—ï¼š</h3>
                <ol style="margin-left: 1.5rem; margin-top: 0.5rem;">
                    <li>é¦–å…ˆè¿›è¡Œç¯å¢ƒè¯„ä¼°ï¼Œç§»é™¤æ‰€æœ‰å±é™©å› ç´ </li>
                    <li>æ£€æŸ¥æ‚£è€…ç—…æƒ…ï¼Œç‚¹å‡»ä¸åŒèº«ä½“éƒ¨ä½è¿›è¡Œæ£€æŸ¥</li>
                    <li>æŒ‰ç…§CPRæ ‡å‡†è¿›è¡Œæ€¥æ•‘æ“ä½œ</li>
                    <li>è§‚å¯Ÿå³ä¾§ç›‘æµ‹æ•°æ®ï¼Œç¡®ä¿æ“ä½œè¾¾æ ‡</li>
                </ol>
                <h3 style="margin-top: 1rem;">CPRæ ‡å‡†ï¼š</h3>
                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                    <li>æŒ‰å‹æ·±åº¦ï¼š5-6å˜ç±³</li>
                    <li>æŒ‰å‹é¢‘ç‡ï¼š100-120æ¬¡/åˆ†é’Ÿ</li>
                    <li>æŒ‰å‹ä¸æ”¾æ¾æ—¶é—´å¤§è‡´ç›¸ç­‰</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentUser = null;
        let currentScene = 'outdoor';
        let currentStep = 1;
        let simulationScore = 0;
        let cprInterval = null;
        let cprCount = 0;
        let cprStartTime = null;
        
        // DOMåŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–å¯¼èˆª
            initNavigation();
            
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
            initEventListeners();
            
            // åˆå§‹åŒ–æ¨¡æ‹Ÿåœºæ™¯
            initSimulation();
            
            // æ£€æŸ¥ç™»å½•çŠ¶æ€
            checkLoginStatus();
            
            // åˆå§‹åŒ–ç»Ÿè®¡æ•°å­—åŠ¨ç”»
            animateCounter('trained-count', 1287);
            animateCounter('simulation-count', 5423);
            
            // åˆå§‹åŒ–ç”¨æˆ·æ•°æ®
            updateUserData();
        });
        
        // åˆå§‹åŒ–å¯¼èˆª
        function initNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    navLinks.forEach(l => l.classList.remove('active'));
                    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                    
                    // æ·»åŠ å½“å‰activeç±»
                    this.classList.add('active');
                    const pageId = this.getAttribute('data-page') + '-page';
                    document.getElementById(pageId).classList.add('active');
                    
                    // å¦‚æœæ˜¯æ¨¡æ‹Ÿé¡µé¢ï¼Œåˆå§‹åŒ–åœºæ™¯
                    if (pageId === 'simulation-page') {
                        resetSimulation();
                    }
                });
            });
            
            // åœºæ™¯å¡ç‰‡ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.scene-card').forEach(card => {
                card.addEventListener('click', function() {
                    const scene = this.getAttribute('data-scene');
                    if (scene) {
                        currentScene = scene;
                        const sceneNames = {
                            'home': 'å®¶åº­åœºæ™¯',
                            'outdoor': 'æˆ·å¤–åœºæ™¯',
                            'office': 'åŠå…¬å®¤åœºæ™¯'
                        };
                        document.getElementById('scene-name').textContent = sceneNames[scene] + ' - å¿ƒè„éª¤åœæ€¥æ•‘';
                        
                        // åˆ‡æ¢åˆ°æ¨¡æ‹Ÿé¡µé¢
                        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                        document.querySelector('[data-page="simulation"]').classList.add('active');
                        document.getElementById('simulation-page').classList.add('active');
                        
                        resetSimulation();
                    }
                });
            });
        }
        
        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            // ç™»å½•æ³¨å†ŒæŒ‰é’®
            document.getElementById('loginBtn').addEventListener('click', () => {
                document.getElementById('loginModal').style.display = 'block';
            });
            
            document.getElementById('registerBtn').addEventListener('click', () => {
                document.getElementById('registerModal').style.display = 'block';
            });
            
            // å…³é—­æŒ‰é’®
            document.getElementById('closeLogin').addEventListener('click', () => {
                document.getElementById('loginModal').style.display = 'none';
            });
            
            document.getElementById('closeRegister').addEventListener('click', () => {
                document.getElementById('registerModal').style.display = 'none';
            });
            
            document.getElementById('closeHelp').addEventListener('click', () => {
                document.getElementById('helpModal').style.display = 'none';
            });
            
            // ç‚¹å‡»å¼¹çª—å¤–å…³é—­
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
            
            // è¡¨å•æäº¤
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
            
            // æ¨¡æ‹Ÿé¡µé¢æŒ‰é’®
            document.getElementById('start-assessment-btn').addEventListener('click', startAssessment);
            document.getElementById('reset-btn').addEventListener('click', resetSimulation);
            document.getElementById('help-btn').addEventListener('click', () => {
                document.getElementById('helpModal').style.display = 'block';
            });
            
            // CPRæŒ‰é’®
            document.getElementById('start-cpr-btn').addEventListener('click', startCPR);
            document.getElementById('stop-cpr-btn').addEventListener('click', stopCPR);
        }
        
        // åŠ¨ç”»è®¡æ•°å™¨
        function animateCounter(elementId, finalValue) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            let current = 0;
            const increment = finalValue / 100;
            const timer = setInterval(() => {
                current += increment;
                if (current >= finalValue) {
                    element.textContent = finalValue.toLocaleString();
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current).toLocaleString();
                }
            }, 20);
        }
        
        // å¤„ç†ç™»å½•
        function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!username || !password) {
                showNotification('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ', 'error');
                return;
            }
            
            // æ¨¡æ‹ŸAPIè°ƒç”¨
            setTimeout(() => {
                currentUser = {
                    username: username,
                    id: Date.now()
                };
                
                // ä¿å­˜åˆ°localStorage
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                localStorage.setItem('userScore', '0');
                localStorage.setItem('completedSimulations', '0');
                localStorage.setItem('totalTime', '0');
                
                showNotification('ç™»å½•æˆåŠŸï¼', 'success');
                document.getElementById('loginModal').style.display = 'none';
                updateAuthButtons();
                updateUserData();
                
                // é‡ç½®è¡¨å•
                document.getElementById('loginForm').reset();
            }, 1000);
        }
        
        // å¤„ç†æ³¨å†Œ
        function handleRegister(e) {
            e.preventDefault();
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            // éªŒè¯
            if (password !== confirmPassword) {
                showNotification('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´', 'error');
                return;
            }
            
            if (!username || !email || !password) {
                showNotification('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«é¡¹', 'error');
                return;
            }
            
            // æ¨¡æ‹ŸAPIè°ƒç”¨
            setTimeout(() => {
                showNotification('æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•', 'success');
                document.getElementById('registerModal').style.display = 'none';
                document.getElementById('loginModal').style.display = 'block';
                
                // é‡ç½®è¡¨å•
                document.getElementById('registerForm').reset();
            }, 1000);
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            // åˆ›å»ºé€šçŸ¥å…ƒç´ 
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(notification);
            
            // è‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateAuthButtons();
            }
        }
        
        // æ›´æ–°è®¤è¯æŒ‰é’®çŠ¶æ€
        function updateAuthButtons() {
            const authButtons = document.querySelector('.auth-buttons');
            if (!authButtons) return;
            
            if (currentUser) {
                authButtons.innerHTML = `
                    <span style="color: white; margin-right: 1rem;">æ¬¢è¿ï¼Œ${currentUser.username}</span>
                    <button class="btn-login" id="logoutBtn">é€€å‡º</button>
                `;
                document.getElementById('logoutBtn').addEventListener('click', logout);
            } else {
                authButtons.innerHTML = `
                    <button class="btn-login" id="loginBtn">ç™»å½•</button>
                    <button class="btn-register" id="registerBtn">æ³¨å†Œ</button>
                `;
                // é‡æ–°ç»‘å®šäº‹ä»¶
                document.getElementById('loginBtn').addEventListener('click', () => {
                    document.getElementById('loginModal').style.display = 'block';
                });
                document.getElementById('registerBtn').addEventListener('click', () => {
                    document.getElementById('registerModal').style.display = 'block';
                });
            }
        }
        
        // é€€å‡ºç™»å½•
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateAuthButtons();
            showNotification('å·²é€€å‡ºç™»å½•', 'info');
            updateUserData();
            
            // å¦‚æœæ˜¯éœ€è¦ç™»å½•çš„é¡µé¢ï¼Œè·³è½¬åˆ°é¦–é¡µ
            if (document.getElementById('profile-page').classList.contains('active')) {
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.querySelector('[data-page="home"]').classList.add('active');
                document.getElementById('home-page').classList.add('active');
            }
        }
        
        // æ›´æ–°ç”¨æˆ·æ•°æ®
        function updateUserData() {
            if (currentUser) {
                document.getElementById('user-score').textContent = localStorage.getItem('userScore') || '0';
                document.getElementById('completed-simulations').textContent = localStorage.getItem('completedSimulations') || '0';
                document.getElementById('total-time').textContent = localStorage.getItem('totalTime') || '0';
                
                // æ˜¾ç¤ºè®­ç»ƒè®°å½•
                const records = JSON.parse(localStorage.getItem('trainingRecords')) || [];
                const recordsContainer = document.getElementById('training-records');
                if (records.length > 0) {
                    let html = '<table style="width: 100%; border-collapse: collapse;">';
                    html += '<tr style="background-color: #2E86AB; color: white;">';
                    html += '<th style="padding: 0.5rem; text-align: left;">æ—¥æœŸ</th>';
                    html += '<th style="padding: 0.5rem; text-align: left;">åœºæ™¯</th>';
                    html += '<th style="padding: 0.5rem; text-align: left;">å¾—åˆ†</th>';
                    html += '</tr>';
                    
                    records.forEach(record => {
                        html += '<tr style="border-bottom: 1px solid #ddd;">';
                        html += `<td style="padding: 0.5rem;">${record.date}</td>`;
                        html += `<td style="padding: 0.5rem;">${record.scene}</td>`;
                        html += `<td style="padding: 0.5rem;">${record.score}</td>`;
                        html += '</tr>';
                    });
                    
                    html += '</table>';
                    recordsContainer.innerHTML = html;
                }
            } else {
                document.getElementById('user-score').textContent = '0';
                document.getElementById('completed-simulations').textContent = '0';
                document.getElementById('total-time').textContent = '0';
                document.getElementById('training-records').innerHTML = 'è¯·ç™»å½•æŸ¥çœ‹è®­ç»ƒè®°å½•';
            }
        }
        
        // åˆå§‹åŒ–æ¨¡æ‹Ÿ
        function initSimulation() {
            // è®¾ç½®åˆå§‹æ­¥éª¤
            updateStep(1);
            
            // åˆå§‹åŒ–è¯„åˆ†
            updateScore(0);
            
            // åˆå§‹åŒ–è®¡æ—¶å™¨
            startTimer();
        }
        
        // é‡ç½®æ¨¡æ‹Ÿ
        function resetSimulation() {
            // åœæ­¢CPR
            stopCPR();
            
            // é‡ç½®æ­¥éª¤
            currentStep = 1;
            updateStep(1);
            
            // é‡ç½®è¯„åˆ†
            simulationScore = 0;
            updateScore(0);
            
            // é‡ç½®è®¡æ—¶å™¨
            resetTimer();
            
            // é‡ç½®åœºæ™¯
            createSceneElements();
            
            // æ›´æ–°æ“ä½œæŒ‡å¼•
            updateInstructions();
            
            // æ¸…ç©ºæ‰£åˆ†é¡¹
            document.getElementById('deduction-list').innerHTML = '<li>æš‚æ— æ‰£åˆ†é¡¹</li>';
        }
        
        // æ›´æ–°æ­¥éª¤
        function updateStep(step) {
            currentStep = step;
            
            // æ›´æ–°æ­¥éª¤æ˜¾ç¤º
            document.querySelectorAll('.step').forEach((s, i) => {
                const stepNum = i + 1;
                if (stepNum === step) {
                    s.classList.add('active');
                    s.classList.remove('completed');
                } else if (stepNum < step) {
                    s.classList.remove('active');
                    s.classList.add('completed');
                } else {
                    s.classList.remove('active', 'completed');
                }
            });
            
            // æ ¹æ®æ­¥éª¤æ›´æ–°åœºæ™¯
            createSceneElements();
            
            // æ›´æ–°æ“ä½œæŒ‡å¼•
            updateInstructions();
        }
        
        // åˆ›å»ºåœºæ™¯å…ƒç´ 
        function createSceneElements() {
            const sceneArea = document.getElementById('scene-area');
            sceneArea.innerHTML = '';
            
            // æ ¹æ®å½“å‰åœºæ™¯å’Œæ­¥éª¤æ·»åŠ å…ƒç´ 
            if (currentStep === 1) {
                // ç¯å¢ƒè¯„ä¼°æ­¥éª¤
                sceneArea.innerHTML = '<h3 style="color: #2E86AB; margin-bottom: 1rem;">ç¯å¢ƒè¯„ä¼°</h3>';
                
                // æ·»åŠ å±é™©å…ƒç´ 
                const hazard = document.createElement('div');
                hazard.className = 'interactive-element hazard fade-in-up delay-100';
                hazard.id = 'hazard-wire';
                hazard.innerHTML = 'æ‰è½ç”µçº¿<br><small>å±é™©ï¼</small>';
                hazard.style.left = '60%';
                hazard.style.top = '30%';
                hazard.addEventListener('click', handleHazardClick);
                sceneArea.appendChild(hazard);
                
                // æ·»åŠ ç»ç¼˜æ£’
                const insulationRod = document.createElement('div');
                insulationRod.className = 'interactive-element fade-in-up delay-200';
                insulationRod.id = 'insulation-rod';
                insulationRod.innerHTML = 'ç»ç¼˜æ£’<br><small>æ‹–åŠ¨ä½¿ç”¨</small>';
                insulationRod.style.left = '20%';
                insulationRod.style.top = '70%';
                insulationRod.draggable = true;
                insulationRod.addEventListener('dragstart', handleDragStart);
                sceneArea.appendChild(insulationRod);
                
                // æ·»åŠ æ‚£è€…
                const patient = document.createElement('div');
                patient.className = 'interactive-element patient fade-in-up delay-300';
                patient.id = 'patient';
                patient.innerHTML = 'æ‚£è€…<br><small>æ˜è¿·çŠ¶æ€</small>';
                patient.style.left = '50%';
                patient.style.top = '50%';
                sceneArea.appendChild(patient);
                
                // æ·»åŠ æ‹–æ”¾ç›®æ ‡åŒºåŸŸ
                sceneArea.addEventListener('dragover', handleDragOver);
                sceneArea.addEventListener('drop', handleDrop);
            } else if (currentStep === 2) {
                // ç—…æƒ…åˆ¤æ–­æ­¥éª¤
                sceneArea.innerHTML = '<h3 style="color: #2E86AB; margin-bottom: 1rem;">ç—…æƒ…åˆ¤æ–­</h3>';
                
                // æ·»åŠ æ‚£è€…èº«ä½“éƒ¨ä½
                const neck = document.createElement('div');
                neck.className = 'interactive-element patient fade-in-up delay-100';
                neck.id = 'neck';
                neck.innerHTML = 'é¢ˆéƒ¨<br><small>æ£€æŸ¥é¢ˆåŠ¨è„‰</small>';
                neck.style.left = '50%';
                neck.style.top = '40%';
                neck.addEventListener('click', () => checkBodyPart('neck', 'é¢ˆåŠ¨è„‰æ— æåŠ¨'));
                sceneArea.appendChild(neck);
                
                const chest = document.createElement('div');
                chest.className = 'interactive-element patient fade-in-up delay-200';
                chest.id = 'chest';
                chest.innerHTML = 'èƒ¸éƒ¨<br><small>æ£€æŸ¥å‘¼å¸</small>';
                chest.style.left = '50%';
                chest.style.top = '55%';
                chest.addEventListener('click', () => checkBodyPart('chest', 'æ— è‡ªä¸»å‘¼å¸'));
                sceneArea.appendChild(chest);
                
                const eyes = document.createElement('div');
                eyes.className = 'interactive-element patient fade-in-up delay-300';
                eyes.id = 'eyes';
                eyes.innerHTML = 'çœ¼éƒ¨<br><small>æ£€æŸ¥ç³å­”</small>';
                eyes.style.left = '40%';
                eyes.style.top = '30%';
                eyes.addEventListener('click', () => checkBodyPart('eyes', 'ç³å­”æ•£å¤§ï¼Œå¯¹å…‰æ— ååº”'));
                sceneArea.appendChild(eyes);
            } else if (currentStep === 3) {
                // æ€¥æ•‘æ“ä½œæ­¥éª¤
                sceneArea.innerHTML = '<h3 style="color: #2E86AB; margin-bottom: 1rem;">æ€¥æ•‘æ“ä½œ - CPR</h3>';
                
                // æ·»åŠ æŒ‰å‹åŒºåŸŸ
                const compressionArea = document.createElement('div');
                compressionArea.className = 'interactive-element patient fade-in-up delay-100';
                compressionArea.id = 'compression-area';
                compressionArea.innerHTML = 'æŒ‰å‹åŒºåŸŸ<br><small>ç‚¹å‡»è¿›è¡ŒCPRæŒ‰å‹</small>';
                compressionArea.style.left = '50%';
                compressionArea.style.top = '50%';
                compressionArea.style.width = '120px';
                compressionArea.style.transform = 'translateX(-50%)';
                compressionArea.addEventListener('click', handleCompression);
                sceneArea.appendChild(compressionArea);
                
                // æ·»åŠ AEDè®¾å¤‡
                const aed = document.createElement('div');
                aed.className = 'interactive-element aed fade-in-up delay-200';
                aed.id = 'aed';
                aed.innerHTML = 'AEDè®¾å¤‡<br><small>ç‚¹å‡»ä½¿ç”¨</small>';
                aed.style.left = '80%';
                aed.style.top = '70%';
                aed.addEventListener('click', useAED);
                sceneArea.appendChild(aed);
            }
        }
        
        // æ›´æ–°æ“ä½œæŒ‡å¼•
        function updateInstructions() {
            const instructionList = document.getElementById('instruction-list');
            instructionList.innerHTML = '';
            
            if (currentStep === 1) {
                instructionList.innerHTML = `
                    <li>ç‚¹å‡»"å¼€å§‹ç¯å¢ƒè¯„ä¼°"æŒ‰é’®</li>
                    <li>æ£€æŸ¥åœºæ™¯ä¸­çš„å±é™©å› ç´ ï¼ˆçº¢è‰²æ ‡è®°ï¼‰</li>
                    <li>å°†ç»ç¼˜æ£’æ‹–åˆ°ç”µçº¿ä¸Šç§»é™¤å±é™©</li>
                    <li>ç¡®ä¿ç¯å¢ƒå®‰å…¨åå†æ¥è¿‘æ‚£è€…</li>
                `;
            } else if (currentStep === 2) {
                instructionList.innerHTML = `
                    <li>ç‚¹å‡»æ‚£è€…é¢ˆéƒ¨æ£€æŸ¥é¢ˆåŠ¨è„‰æåŠ¨</li>
                    <li>ç‚¹å‡»æ‚£è€…èƒ¸éƒ¨æ£€æŸ¥å‘¼å¸</li>
                    <li>ç‚¹å‡»æ‚£è€…çœ¼éƒ¨æ£€æŸ¥ç³å­”</li>
                    <li>æ ¹æ®æ£€æŸ¥ç»“æœåˆ¤æ–­ç—…æƒ…</li>
                `;
            } else if (currentStep === 3) {
                instructionList.innerHTML = `
                    <li>ç‚¹å‡»"å¼€å§‹CPR"æŒ‰é’®</li>
                    <li>ç‚¹å‡»æ‚£è€…èƒ¸éƒ¨è¿›è¡ŒæŒ‰å‹</li>
                    <li>ä¿æŒæŒ‰å‹æ·±åº¦5-6å˜ç±³ï¼ˆç»¿è‰²åŒºåŸŸï¼‰</li>
                    <li>ä¿æŒæŒ‰å‹é¢‘ç‡100-120æ¬¡/åˆ†é’Ÿ</li>
                    <li>30æ¬¡æŒ‰å‹åç‚¹å‡»AEDè®¾å¤‡</li>
                `;
            }
        }
        
        // å¼€å§‹ç¯å¢ƒè¯„ä¼°
        function startAssessment() {
            if (currentStep === 1) {
                showNotification('å¼€å§‹ç¯å¢ƒè¯„ä¼°ï¼Œè¯·æ£€æŸ¥å±é™©å› ç´ ', 'info');
                
                // é—ªçƒæç¤ºå±é™©å› ç´ 
                const hazard = document.getElementById('hazard-wire');
                if (hazard) {
                    hazard.classList.add('flash-animation');
                }
            }
        }
        
        // å¤„ç†å±é™©ç‚¹å‡»
        function handleHazardClick() {
            showNotification('å±é™©ï¼è¯·ä½¿ç”¨ç»ç¼˜æ£’ç§»é™¤ç”µçº¿', 'error');
            addDeduction('ç›´æ¥è§¦ç¢°å±é™©ç”µçº¿', 10);
        }
        
        // æ‹–æ‹½å¼€å§‹
        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.id);
        }
        
        // æ‹–æ‹½ç»è¿‡
        function handleDragOver(e) {
            e.preventDefault();
        }
        
        // æ”¾ç½®
        function handleDrop(e) {
            e.preventDefault();
            const id = e.dataTransfer.getData('text/plain');
            const draggable = document.getElementById(id);
            
            // æ£€æŸ¥æ˜¯å¦å°†ç»ç¼˜æ£’æ‹–åˆ°ç”µçº¿ä¸Š
            if (id === 'insulation-rod' && e.target.id === 'hazard-wire') {
                // ç§»é™¤å±é™©
                const hazard = document.getElementById('hazard-wire');
                hazard.innerHTML = 'å·²ç§»é™¤<br><small>å®‰å…¨</small>';
                hazard.classList.remove('hazard', 'flash-animation');
                hazard.classList.add('patient');
                hazard.style.backgroundColor = '#4CAF50';
                
                showNotification('ç¯å¢ƒå±é™©å·²æ’é™¤ï¼', 'success');
                addScore(20);
                
                // 2ç§’åè¿›å…¥ä¸‹ä¸€æ­¥
                setTimeout(() => {
                    updateStep(2);
                }, 2000);
            }
        }
        
        // æ£€æŸ¥èº«ä½“éƒ¨ä½
        function checkBodyPart(part, result) {
            showNotification(`æ£€æŸ¥${result}`, 'info');
            addScore(10);
            
            // å¦‚æœæ‰€æœ‰éƒ¨ä½éƒ½æ£€æŸ¥è¿‡äº†ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥
            const checkedParts = JSON.parse(localStorage.getItem('checkedParts') || '[]');
            if (!checkedParts.includes(part)) {
                checkedParts.push(part);
                localStorage.setItem('checkedParts', JSON.stringify(checkedParts));
            }
            
            if (checkedParts.length >= 3) {
                setTimeout(() => {
                    updateStep(3);
                    localStorage.removeItem('checkedParts');
                }, 1000);
            }
        }
        
        // å¤„ç†æŒ‰å‹
        function handleCompression() {
            if (cprInterval) {
                // æ¨¡æ‹ŸæŒ‰å‹æ·±åº¦ï¼ˆéšæœºåœ¨3-7cmä¹‹é—´ï¼‰
                const depth = 3 + Math.random() * 4;
                document.getElementById('depth-value').textContent = depth.toFixed(1);
                
                // æ›´æ–°æ·±åº¦æŒ‡ç¤ºå™¨ (3-7cmå¯¹åº”30%-70%)
                const indicatorPos = 30 + (depth - 3) * 10;
                document.getElementById('depth-indicator').style.left = indicatorPos + '%';
                
                // æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®èŒƒå›´
                if (depth >= 5 && depth <= 6) {
                    document.getElementById('depth-value').style.color = '#4CAF50';
                    addScore(1);
                } else {
                    document.getElementById('depth-value').style.color = '#ff4757';
                    addDeduction(`æŒ‰å‹æ·±åº¦${depth.toFixed(1)}cmä¸è¾¾æ ‡`, 1);
                }
                
                // æ·»åŠ æŒ‰å‹åŠ¨ç”»
                this.classList.add('compression-animation');
                setTimeout(() => {
                    this.classList.remove('compression-animation');
                }, 300);
                
                // æ·±åº¦æŒ‡ç¤ºå™¨åŠ¨ç”»
                const indicator = document.getElementById('depth-indicator');
                indicator.classList.add('indicator-pulse');
                setTimeout(() => {
                    indicator.classList.remove('indicator-pulse');
                }, 300);
            }
        }
        
        // å¼€å§‹CPR
        function startCPR() {
            if (!cprInterval) {
                cprStartTime = Date.now();
                cprCount = 0;
                
                // å¼€å§‹è®¡æ•°
                cprInterval = setInterval(() => {
                    cprCount++;
                    const elapsedSeconds = (Date.now() - cprStartTime) / 1000;
                    const frequency = Math.round((cprCount / elapsedSeconds) * 60);
                    document.getElementById('frequency-value').textContent = frequency;
                    
                    // æ£€æŸ¥é¢‘ç‡æ˜¯å¦åœ¨æ­£ç¡®èŒƒå›´
                    if (frequency >= 100 && frequency <= 120) {
                        document.getElementById('frequency-value').style.color = '#4CAF50';
                    } else {
                        document.getElementById('frequency-value').style.color = '#ff4757';
                        if (cprCount % 10 === 0) {
                            addDeduction(`æŒ‰å‹é¢‘ç‡${frequency}æ¬¡/åˆ†é’Ÿä¸è¾¾æ ‡`, 1);
                        }
                    }
                    
                    // æ¯30æ¬¡æŒ‰å‹æç¤ºä½¿ç”¨AED
                    if (cprCount === 30) {
                        showNotification('å·²å®Œæˆ30æ¬¡æŒ‰å‹ï¼Œè¯·ä½¿ç”¨AEDè®¾å¤‡', 'info');
                        document.getElementById('aed').classList.add('flash-animation');
                    }
                }, 100);
                
                showNotification('CPRå¼€å§‹ï¼Œè¯·ç‚¹å‡»æ‚£è€…èƒ¸éƒ¨è¿›è¡ŒæŒ‰å‹', 'info');
            }
        }
        
        // åœæ­¢CPR
        function stopCPR() {
            if (cprInterval) {
                clearInterval(cprInterval);
                cprInterval = null;
                
                // è®¡ç®—æœ€ç»ˆé¢‘ç‡
                const elapsedSeconds = (Date.now() - cprStartTime) / 1000;
                const frequency = Math.round((cprCount / elapsedSeconds) * 60);
                
                showNotification(`CPRåœæ­¢ï¼Œæ€»æŒ‰å‹${cprCount}æ¬¡ï¼Œå¹³å‡é¢‘ç‡${frequency}æ¬¡/åˆ†é’Ÿ`, 'info');
            }
        }
        
        // ä½¿ç”¨AED
        function useAED() {
            if (cprCount >= 30) {
                showNotification('AEDä½¿ç”¨æ­£ç¡®ï¼ç”µæç‰‡ç²˜è´´ä½ç½®æ­£ç¡®ï¼Œå¼€å§‹åˆ†æå¿ƒå¾‹...', 'success');
                addScore(30);
                document.getElementById('aed').classList.remove('flash-animation');
                
                // å®Œæˆæ¨¡æ‹Ÿ
                setTimeout(() => {
                    completeSimulation();
                }, 2000);
            } else {
                showNotification('è¯·å…ˆå®Œæˆ30æ¬¡CPRæŒ‰å‹', 'error');
            }
        }
        
        // å®Œæˆæ¨¡æ‹Ÿ
        function completeSimulation() {
            stopCPR();
            showNotification(`æ¨¡æ‹Ÿå®Œæˆï¼æœ€ç»ˆå¾—åˆ†: ${simulationScore}`, 'success');
            
            // ä¿å­˜è®°å½•
            if (currentUser) {
                const currentScore = parseInt(localStorage.getItem('userScore') || '0');
                localStorage.setItem('userScore', (currentScore + simulationScore).toString());
                
                const currentSimulations = parseInt(localStorage.getItem('completedSimulations') || '0');
                localStorage.setItem('completedSimulations', (currentSimulations + 1).toString());
                
                const currentTime = parseInt(localStorage.getItem('totalTime') || '0');
                localStorage.setItem('totalTime', (currentTime + 1).toString());
                
                // ä¿å­˜è®­ç»ƒè®°å½•
                const records = JSON.parse(localStorage.getItem('trainingRecords') || '[]');
                const sceneNames = {
                    'home': 'å®¶åº­åœºæ™¯',
                    'outdoor': 'æˆ·å¤–åœºæ™¯',
                    'office': 'åŠå…¬å®¤åœºæ™¯'
                };
                records.unshift({
                    date: new Date().toLocaleDateString(),
                    scene: sceneNames[currentScene] || 'æˆ·å¤–åœºæ™¯',
                    score: simulationScore
                });
                
                if (records.length > 10) records.length = 10; // åªä¿ç•™æœ€è¿‘10æ¡
                localStorage.setItem('trainingRecords', JSON.stringify(records));
                
                updateUserData();
            }
            
            // 3ç§’åé‡ç½®
            setTimeout(() => {
                resetSimulation();
            }, 3000);
        }
        
        // æ›´æ–°è¯„åˆ†
        function updateScore(points) {
            simulationScore = Math.max(0, points);
            document.getElementById('score-display').textContent = simulationScore;
        }
        
        // å¢åŠ åˆ†æ•°
        function addScore(points) {
            simulationScore += points;
            const scoreDisplay = document.getElementById('score-display');
            scoreDisplay.textContent = simulationScore;
            scoreDisplay.classList.add('score-increase');
            setTimeout(() => {
                scoreDisplay.classList.remove('score-increase');
            }, 500);
        }
        
        // æ·»åŠ æ‰£åˆ†é¡¹
        function addDeduction(reason, points) {
            simulationScore = Math.max(0, simulationScore - points);
            const scoreDisplay = document.getElementById('score-display');
            scoreDisplay.textContent = simulationScore;
            scoreDisplay.classList.add('score-decrease');
            setTimeout(() => {
                scoreDisplay.classList.remove('score-decrease');
            }, 500);
            
            const deductionList = document.getElementById('deduction-list');
            const li = document.createElement('li');
            li.textContent = `${reason}ï¼Œæ‰£${points}åˆ†`;
            deductionList.prepend(li);
            
            // é™åˆ¶æ˜¾ç¤ºæ•°é‡
            const items = deductionList.querySelectorAll('li');
            if (items.length > 5) {
                items[items.length - 1].remove();
            }
        }
        
        // è®¡æ—¶å™¨
        let timerInterval = null;
        let timerSeconds = 0;
        
        function startTimer() {
            if (!timerInterval) {
                timerInterval = setInterval(() => {
                    timerSeconds++;
                    const minutes = Math.floor(timerSeconds / 60);
                    const seconds = timerSeconds % 60;
                    document.getElementById('timer-display').textContent =                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }
        }
        
        function resetTimer() {
            clearInterval(timerInterval);
            timerSeconds = 0;
            document.getElementById('timer-display').textContent = '00:00';
            timerInterval = null;
            startTimer();
        }
        
        // çŸ¥è¯†åº“åŠŸèƒ½
        function showKnowledge(type) {
            const knowledgeDetail = document.getElementById('knowledge-detail');
            const titleElement = document.getElementById('knowledge-title');
            const contentElement = document.getElementById('knowledge-content');
            
            // è®¾ç½®æ ‡é¢˜å’Œå†…å®¹
            if (type === 'cpr') {
                titleElement.textContent = 'å¿ƒè‚ºå¤è‹ (CPR) æ“ä½œæŒ‡å—';
                contentElement.innerHTML = `
                    <div style="line-height: 1.8;">
                        <h3 style="color: #2E86AB; margin: 1rem 0;">CPRæ“ä½œæ­¥éª¤ï¼š</h3>
                        <ol style="margin-left: 1.5rem;">
                            <li><strong>ç¯å¢ƒè¯„ä¼°</strong>ï¼šç¡®ä¿ç°åœºå®‰å…¨ï¼Œé¿å…æ–½æ•‘è€…å’Œæ‚£è€…å—åˆ°äºŒæ¬¡ä¼¤å®³</li>
                            <li><strong>æ£€æŸ¥æ„è¯†</strong>ï¼šè½»æ‹æ‚£è€…åŒè‚©ï¼Œå¤§å£°å‘¼å”¤ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ååº”</li>
                            <li><strong>å‘¼æ•‘æ±‚æ´</strong>ï¼šç«‹å³æ‹¨æ‰“120ï¼Œè¯·æ±‚AEDå’Œä¸“ä¸šäººå‘˜æ”¯æ´</li>
                            <li><strong>æ£€æŸ¥å‘¼å¸</strong>ï¼šè§‚å¯Ÿæ‚£è€…èƒ¸éƒ¨æ˜¯å¦èµ·ä¼ï¼Œæ£€æŸ¥æ—¶é—´5-10ç§’</li>
                            <li><strong>èƒ¸å¤–æŒ‰å‹</strong>ï¼š
                                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                                    <li>æŒ‰å‹ä½ç½®ï¼šèƒ¸éª¨ä¸‹åŠéƒ¨ï¼Œä¸¤ä¹³å¤´è¿çº¿ä¸­ç‚¹</li>
                                    <li>æŒ‰å‹æ·±åº¦ï¼š5-6å˜ç±³</li>
                                    <li>æŒ‰å‹é¢‘ç‡ï¼š100-120æ¬¡/åˆ†é’Ÿ</li>
                                    <li>æŒ‰å‹æ‰‹æ³•ï¼šæŒæ ¹é‡å ï¼Œæ‰‹æŒ‡äº¤å‰æŠ¬èµ·ï¼Œå‚ç›´ç”¨åŠ›</li>
                                </ul>
                            </li>
                            <li><strong>å¼€æ”¾æ°”é“</strong>ï¼šæ¸…é™¤å£è…”å¼‚ç‰©ï¼Œé‡‡ç”¨ä»°å¤´æŠ¬é¢æ³•</li>
                            <li><strong>äººå·¥å‘¼å¸</strong>ï¼šæä½é¼»å­ï¼Œå£å¯¹å£å¹æ°”ï¼Œæ¯æ¬¡1ç§’ï¼Œå¯è§èƒ¸å»“èµ·ä¼</li>
                        </ol>
                        
                        <h3 style="color: #2E86AB; margin: 1rem 0;">æ³¨æ„äº‹é¡¹ï¼š</h3>
                        <ul style="margin-left: 1.5rem;">
                            <li>æŒ‰å‹æ—¶è¦å¿«é€Ÿæœ‰åŠ›ï¼Œé¿å…ä¸­æ–­</li>
                            <li>æŒ‰å‹ä¸æ”¾æ¾æ—¶é—´ç›¸ç­‰ï¼Œæ”¾æ¾æ—¶æŒæ ¹ä¸ç¦»å¼€èƒ¸å£</li>
                            <li>æˆäººæŒ‰å‹é€šæ°”æ¯”ä¸º30:2ï¼Œå„¿ç«¥å¯è€ƒè™‘15:2</li>
                            <li>æŒç»­è¿›è¡Œç›´åˆ°ä¸“ä¸šäººå‘˜åˆ°è¾¾æˆ–æ‚£è€…æ¢å¤è‡ªä¸»å‘¼å¸</li>
                        </ul>
                        
                        <div style="background-color: #f8f9fa; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                            <strong>é‡è¦æç¤ºï¼š</strong>æœ¬æŒ‡å—ä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œå®é™…æ€¥æ•‘è¯·éµå¾ªä¸“ä¸šåŸ¹è®­æŒ‡å¯¼ã€‚
                        </div>
                    </div>
                `;
            } else if (type === 'aed') {
                titleElement.textContent = 'è‡ªåŠ¨ä½“å¤–é™¤é¢¤å™¨ (AED) ä½¿ç”¨æŒ‡å—';
                contentElement.innerHTML = `
                    <div style="line-height: 1.8;">
                        <h3 style="color: #2E86AB; margin: 1rem 0;">AEDæ“ä½œæ­¥éª¤ï¼š</h3>
                        <ol style="margin-left: 1.5rem;">
                            <li><strong>å¼€å¯AED</strong>ï¼šæ‰“å¼€è®¾å¤‡ç”µæºï¼Œéµå¾ªè¯­éŸ³æç¤ºæ“ä½œ</li>
                            <li><strong>ç²˜è´´ç”µæç‰‡</strong>ï¼š
                                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                                    <li>æˆäºº/å„¿ç«¥ï¼šä¸€ç‰‡è´´åœ¨å³ä¸Šèƒ¸å£ï¼ˆé”éª¨ä¸‹æ–¹ï¼‰ï¼Œä¸€ç‰‡è´´åœ¨å·¦ä¹³å¤´å¤–ä¾§</li>
                                    <li>å©´å„¿ï¼šä¸¤ç‰‡ç”µæç‰‡å¯è´´åœ¨å‰åèƒ¸å£</li>
                                </ul>
                            </li>
                            <li><strong>è¿æ¥ç”µæç‰‡</strong>ï¼šå°†ç”µæç‰‡è¿æ¥çº¿æ’å…¥AEDä¸»æœº</li>
                            <li><strong>åˆ†æå¿ƒå¾‹</strong>ï¼šç¡®ä¿æ‰€æœ‰äººç¦»å¼€æ‚£è€…ï¼ŒæŒ‰ä¸‹åˆ†ææŒ‰é’®</li>
                            <li><strong>ç”µå‡»é™¤é¢¤</strong>ï¼šå¦‚æœAEDå»ºè®®ç”µå‡»ï¼Œç¡®ä¿æ— äººæ¥è§¦æ‚£è€…åæŒ‰ä¸‹ç”µå‡»æŒ‰é’®</li>
                            <li><strong>ç»§ç»­CPR</strong>ï¼šç”µå‡»åç«‹å³æ¢å¤èƒ¸å¤–æŒ‰å‹ï¼Œéµå¾ªAEDè¯­éŸ³æç¤º</li>
                        </ol>
                        
                        <h3 style="color: #2E86AB; margin: 1rem 0;">æ³¨æ„äº‹é¡¹ï¼š</h3>
                        <ul style="margin-left: 1.5rem;">
                            <li>ä½¿ç”¨å‰ç¡®ä¿æ‚£è€…èƒ¸éƒ¨å¹²ç‡¥ï¼Œå»é™¤é‡‘å±ç‰©å“å’Œè¯ç‰©è´´ç‰‡</li>
                            <li>æ°´ä¸­æ–½æ•‘æ—¶ï¼Œå…ˆå°†æ‚£è€…ç§»è‡³å¹²ç‡¥å¤„å†ä½¿ç”¨AED</li>
                            <li>åˆ†æå’Œç”µå‡»æ—¶ï¼Œå¿…é¡»ç¡®ä¿æ— äººæ¥è§¦æ‚£è€…</li>
                            <li>AEDä¸ä¼šå¯¹æ— å¿ƒå¾‹çš„æ‚£è€…é€ æˆä¼¤å®³</li>
                        </ul>
                        
                        <div style="background-color: #f8f9fa; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                            <strong>é‡è¦æç¤ºï¼š</strong>AEDä»…é€‚ç”¨äºå¿ƒå®¤é¢¤åŠ¨æˆ–å®¤æ€§å¿ƒåŠ¨è¿‡é€Ÿå¯¼è‡´çš„å¿ƒè„éª¤åœã€‚
                        </div>
                    </div>
                `;
            } else if (type === 'drowning') {
                titleElement.textContent = 'æººæ°´æ€¥æ•‘æŒ‡å—';
                contentElement.innerHTML = `
                    <div style="line-height: 1.8;">
                        <h3 style="color: #2E86AB; margin: 1rem 0;">æººæ°´æ•‘æ´æ­¥éª¤ï¼š</h3>
                        <ol style="margin-left: 1.5rem;">
                            <li><strong>è‡ªæˆ‘ä¿æŠ¤</strong>ï¼šç¡®ä¿æ•‘æ´è€…è‡ªèº«å®‰å…¨ï¼Œé¿å…è¢«æººæ°´è€…æ‹–æ‹½</li>
                            <li><strong>å‘¼æ•‘æ±‚æ´</strong>ï¼šç«‹å³æ‹¨æ‰“120ï¼Œå¯»æ±‚ä¸“ä¸šæ•‘æ´</li>
                            <li><strong>æŠ›æŠ•æ•‘æ´</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç«¹ç«¿ã€ç»³ç´¢ã€æ•‘ç”Ÿåœˆç­‰å·¥å…·è¿›è¡Œæ•‘æ´</li>
                            <li><strong>æ¥è¿‘æ‚£è€…</strong>ï¼šä»èƒŒåæ¥è¿‘ï¼Œé¿å…è¢«æººæ°´è€…æŠ±ä½</li>
                            <li><strong>ç§»è‡³å²¸è¾¹</strong>ï¼šå°†æººæ°´è€…å¹³ç¨³ç§»è‡³åšå®å¹³é¢</li>
                            <li><strong>æ£€æŸ¥æ„è¯†</strong>ï¼šè½»æ‹å‘¼å”¤ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ„è¯†</li>
                            <li><strong>æ¸…é™¤å¼‚ç‰©</strong>ï¼šæ¸…ç†å£è…”é¼»è…”å†…çš„æ°´è‰ã€æ³¥æ²™ç­‰å¼‚ç‰©</li>
                            <li><strong>å¿ƒè‚ºå¤è‹</strong>ï¼š
                                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                                    <li>æ— å‘¼å¸/è„‰æï¼šç«‹å³å¼€å§‹CPRï¼Œå…ˆæŒ‰å‹åé€šæ°”</li>
                                    <li>æœ‰å‘¼å¸/æ— è„‰æï¼šä»…è¿›è¡Œèƒ¸å¤–æŒ‰å‹</li>
                                    <li>æœ‰è„‰æ/æ— å‘¼å¸ï¼šä»…è¿›è¡Œäººå·¥å‘¼å¸</li>
                                </ul>
                            </li>
                        </ol>
                        
                        <h3 style="color: #2E86AB; margin: 1rem 0;">æ³¨æ„äº‹é¡¹ï¼š</h3>
                        <ul style="margin-left: 1.5rem;">
                            <li>ä¸è¦è¿›è¡Œæ§æ°´æ“ä½œï¼Œä»¥å…å»¶è¯¯CPRæ—¶æœº</li>
                            <li>æººæ°´æ‚£è€…å³ä½¿æ¢å¤å‘¼å¸ï¼Œä¹Ÿéœ€è¦é€åŒ»æ£€æŸ¥</li>
                            <li>ä½æ¸©æººæ°´æ‚£è€…éœ€æ³¨æ„ä¿æš–ï¼Œé¿å…ä½“æ¸©è¿‡ä½</li>
                            <li>å„¿ç«¥æººæ°´å¯èƒ½æ— å£°æ— æ¯ï¼Œéœ€æ—¶åˆ»ç›‘æŠ¤</li>
                        </ul>
                        
                        <div style="background-color: #f8f9fa; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                            <strong>é‡è¦æç¤ºï¼š</strong>é¢„é˜²èƒœäºæ•‘æ´ï¼ŒåŠ å¼ºå„¿ç«¥ç›‘æŠ¤ï¼Œè¿œç¦»å±é™©æ°´åŸŸã€‚
                        </div>
                    </div>
                `;
            }
            
            // æ˜¾ç¤ºè¯¦æƒ…
            knowledgeDetail.style.display = 'block';
            
            // å¹³æ»‘æ»šåŠ¨åˆ°è¯¦æƒ…åŒºåŸŸ
            knowledgeDetail.scrollIntoView({ behavior: 'smooth' });
        }
        
        function hideKnowledge() {
            document.getElementById('knowledge-detail').style.display = 'none';
        }
        
        // ç¡®ä¿é¡µé¢å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨
        window.addEventListener('beforeunload', function() {
            clearInterval(timerInterval);
            clearInterval(cprInterval);
        });
    </script>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-left">
                <div class="logo" style="margin-bottom: 0.5rem;">
                    <div class="logo-icon">æ•‘</div>
                    <span class="logo-text">æ€¥æ•‘æŒ‡æŒ¥å®˜</span>
                </div>
                <p style="font-size: 0.9rem; color: #ccc;">åº”æ€¥æ•‘æ´æ¨¡æ‹ŸåŸ¹è®­å¹³å° Â© 2025</p>
            </div>
            <div class="footer-center">
                <div class="tip-scroll">
                    <div class="tip-text">æ€¥æ•‘çŸ¥è¯†ä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œå®é™…æ“ä½œè¯·éµå¾ªä¸“ä¸šæŒ‡å¯¼</div>
                </div>
            </div>
            <div class="footer-right">
                <p style="font-size: 0.9rem; color: #ccc;">è”ç³»æˆ‘ä»¬ï¼šsupport@firstaid.com</p>
            </div>
        </div>
    </footer>
</body>
</html>